#!/bin/bash

# Here
cmd="cd '`pwd`'"

# If arguments, append them as command
if [[ -n $@ ]]; then
  cmd="$cmd && $@"
fi

# AppleScript does the trick
osascript -e 'tell application "Terminal"' -e 'tell application "System Events" to tell process "Terminal" to keystroke "t" using command down' -e "do script with command \"$cmd\" in selected tab of the front window" -e 'end tell' &> /dev/null
