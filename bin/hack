#!/bin/bash
set -ex

current_branch=$(git branch | grep '*' | sed -e 's/* //')

git fetch --all --prune

if [ $current_branch != "master" ]; then
  git checkout master
fi

git pull origin master --ff-only --rebase=true --autostash

if [ $current_branch != "master" ]; then
  git checkout $current_branch
  git rebase master --autostash
fi
